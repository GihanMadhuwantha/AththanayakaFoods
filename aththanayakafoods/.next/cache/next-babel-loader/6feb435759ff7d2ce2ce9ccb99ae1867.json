{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gihanmadhuwantha\\\\Desktop\\\\system_Development\\\\AththanayakaFoods\\\\aththanayakafoods\\\\pages\\\\edit_user\\\\[id].js\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport Head from 'next/head';\nimport { useContext, useState, useEffect } from 'react';\nimport { DataContext } from '../../store/GlobalState';\nimport { updateItem } from '../../store/Actions';\nimport { useRouter } from 'next/router';\nimport { patchData } from '../../utils/fetchData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditUser = () => {\n  const router = useRouter();\n  const {\n    id\n  } = router.query;\n  const {\n    state,\n    dispatch\n  } = useContext(DataContext);\n  const {\n    auth,\n    users\n  } = state;\n  const {\n    0: editUser,\n    1: setEditUser\n  } = useState([]);\n  const {\n    0: checkAdmin,\n    1: setCheckAdmin\n  } = useState(false);\n  const {\n    0: num,\n    1: setNum\n  } = useState(0);\n  useEffect(() => {\n    users.forEach(user => {\n      if (user._id === id) {\n        setEditUser(user);\n        setCheckAdmin(user.role === 'admin' ? true : false);\n      }\n    });\n  }, [users]);\n  const handleCheck = () => {\n    setCheckAdmin(!checkAdmin);\n    setNum(num + 1);\n  };\n  const handleSubmit = () => {\n    let role = checkAdmin ? 'admin' : 'user';\n    if (num % 2 !== 0) {\n      dispatch({\n        type: 'NOTIFY',\n        payload: {\n          loading: true\n        }\n      });\n      patchData(`user/${editUser._id}`, {\n        role\n      }, auth.token).then(res => {\n        if (res.err) return dispatch({\n          type: 'NOTIFY',\n          payload: {\n            error: res.err\n          }\n        });\n        dispatch(updateItem(users, editUser._id, _objectSpread(_objectSpread({}, editUser), {}, {\n          role\n        }), 'ADD_USERS'));\n        return dispatch({\n          type: 'NOTIFY',\n          payload: {\n            success: res.msg\n          }\n        });\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit_user my-3\",\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Edit User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-dark\",\n        onClick: () => router.back(),\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-long-arrow-alt-left\",\n          \"aria-hidden\": true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), \" Go Back\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-4 mx-auto my-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-uppercase text-secondary\",\n        children: \"Edit User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          className: \"d-block\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          size: \"50\",\n          defaultValue: editUser.name,\n          disabled: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          className: \"d-block\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"email\",\n          defaultValue: editUser.email,\n          disabled: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"isAdmin\",\n          checked: checkAdmin,\n          style: {\n            width: '20px',\n            height: '20px'\n          },\n          onChange: handleCheck\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"isAdmin\",\n          style: {\n            transform: 'translate(4px, -3px)'\n          },\n          children: \"isAdmin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-dark\",\n        onClick: handleSubmit,\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n};\nexport default EditUser;","map":{"version":3,"names":["Head","useContext","useState","useEffect","DataContext","updateItem","useRouter","patchData","EditUser","router","id","query","state","dispatch","auth","users","editUser","setEditUser","checkAdmin","setCheckAdmin","num","setNum","forEach","user","_id","role","handleCheck","handleSubmit","type","payload","loading","token","then","res","err","error","success","msg","back","name","email","width","height","transform"],"sources":["C:/Users/gihanmadhuwantha/Desktop/system_Development/AththanayakaFoods/aththanayakafoods/pages/edit_user/[id].js"],"sourcesContent":["import Head from 'next/head'\r\nimport { useContext, useState, useEffect } from 'react'\r\nimport {DataContext} from '../../store/GlobalState'\r\nimport {updateItem} from '../../store/Actions'\r\n\r\nimport {useRouter} from 'next/router'\r\nimport {patchData} from '../../utils/fetchData'\r\n\r\nconst EditUser = () => {\r\n    const router = useRouter()\r\n    const { id }= router.query\r\n\r\n    const {state, dispatch} = useContext(DataContext)\r\n    const {auth, users} = state\r\n\r\n    const [editUser, setEditUser] = useState([])\r\n    const [checkAdmin, setCheckAdmin] = useState(false)\r\n    const [num, setNum] = useState(0)\r\n\r\n    useEffect(() => {\r\n        users.forEach(user => {\r\n            if(user._id === id){\r\n                setEditUser(user)\r\n                setCheckAdmin(user.role === 'admin' ? true : false)\r\n            }\r\n        })\r\n    },[users])\r\n\r\n    const handleCheck = () => {\r\n        setCheckAdmin(!checkAdmin)\r\n        setNum(num + 1)\r\n    }\r\n\r\n    const handleSubmit = () => {\r\n        let role = checkAdmin ? 'admin' : 'user'\r\n        if(num % 2 !== 0){\r\n            dispatch({type: 'NOTIFY', payload: {loading: true}})\r\n            patchData(`user/${editUser._id}`, {role}, auth.token)\r\n            .then(res => {\r\n                if(res.err) return dispatch({type: 'NOTIFY', payload: {error: res.err}})\r\n\r\n                dispatch(updateItem(users, editUser._id, {\r\n                    ...editUser, role\r\n                }, 'ADD_USERS'))\r\n\r\n                return dispatch({type: 'NOTIFY', payload: {success: res.msg}})\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n    \r\n    return (\r\n        <div className=\"edit_user my-3\">\r\n            <Head>\r\n                <title>Edit User</title>\r\n            </Head>\r\n\r\n            <div>\r\n                <button className=\"btn btn-dark\" onClick={() => router.back()}>\r\n                    <i className=\"fas fa-long-arrow-alt-left\" aria-hidden></i> Go Back\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"col-md-4 mx-auto my-4\">\r\n                <h2 className=\"text-uppercase text-secondary\">Edit User</h2>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"name\" className=\"d-block\">Name</label>\r\n                    <input type=\"text\" id=\"name\" size=\"50\" defaultValue={editUser.name} disabled />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"email\" className=\"d-block\">Email</label>\r\n                    <input type=\"text\" id=\"email\" defaultValue={editUser.email} disabled />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <input type=\"checkbox\" id=\"isAdmin\" checked={checkAdmin}\r\n                    style={{width: '20px', height: '20px'}} onChange={handleCheck} />\r\n\r\n                    <label htmlFor=\"isAdmin\" style={{transform: 'translate(4px, -3px)'}}>\r\n                        isAdmin\r\n                    </label>\r\n                </div>\r\n\r\n                <button className=\"btn btn-dark\" onClick={handleSubmit}>Update</button>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditUser"],"mappings":"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"},"metadata":{},"sourceType":"module"}