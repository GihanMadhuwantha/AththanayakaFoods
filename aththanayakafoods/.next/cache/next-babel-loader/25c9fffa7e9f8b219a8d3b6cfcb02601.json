{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gihanmadhuwantha\\\\Desktop\\\\system_Development\\\\AththanayakaFoods\\\\aththanayakafoods\\\\pages\\\\paypalBtn.js\";\nimport { useEffect, useRef, useContext } from 'react';\nimport { postData } from '../utils/fetchData';\nimport { DataContext } from '../store/GlobalState';\nimport { updateItem } from '../store/Actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst paypalBtn = ({\n  total,\n  address,\n  mobile,\n  state,\n  dispatch\n}) => {\n  const refPaypalBtn = useRef();\n  const {\n    cart,\n    auth\n  } = state;\n  useEffect(() => {\n    paypal.Buttons({\n      createOrder: function (data, actions) {\n        // This function sets up the details of the transaction, including the amount and line item details.\n        return actions.order.create({\n          purchase_units: [{\n            amount: {\n              value: total\n            }\n          }]\n        });\n      },\n      onApprove: function (data, actions) {\n        // This function captures the funds from the transaction.\n        //dispatch({ type: 'NOTIFY', payload: {loading: true} })\n\n        return actions.order.capture().then(function (details) {\n          postData('order', {\n            address,\n            mobile,\n            cart,\n            total\n          }, auth.token).then(res => {\n            if (res.err) return dispatch({\n              type: 'NOTIFY',\n              payload: {\n                error: res.err\n              }\n            });\n          });\n          dispatch({\n            type: 'ADD_CART',\n            payload: []\n          });\n          return dispatch({\n            type: 'NOTIFY',\n            payload: {\n              succes: res.err\n            }\n          });\n        });\n      }\n    }).render(refPaypalBtn.current);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: refPaypalBtn\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n};\nexport default paypalBtn;","map":{"version":3,"names":["useEffect","useRef","useContext","postData","DataContext","updateItem","paypalBtn","total","address","mobile","state","dispatch","refPaypalBtn","cart","auth","paypal","Buttons","createOrder","data","actions","order","create","purchase_units","amount","value","onApprove","capture","then","details","token","res","err","type","payload","error","succes","render","current"],"sources":["C:/Users/gihanmadhuwantha/Desktop/system_Development/AththanayakaFoods/aththanayakafoods/pages/paypalBtn.js"],"sourcesContent":["import { useEffect, useRef, useContext } from 'react'\r\nimport { postData } from '../utils/fetchData'\r\nimport {DataContext} from '../store/GlobalState'\r\nimport {updateItem} from '../store/Actions'\r\n\r\nconst paypalBtn = ({total,address,mobile,state,dispatch}) => {\r\n    const refPaypalBtn = useRef()\r\n    const{cart,auth}=state\r\n    useEffect(() => {\r\n      paypal.Buttons({\r\n          createOrder: function(data, actions) {\r\n            // This function sets up the details of the transaction, including the amount and line item details.\r\n            return actions.order.create({\r\n              purchase_units: [{\r\n                amount: {\r\n                  value:total\r\n                }\r\n              }]\r\n            });\r\n          },\r\n          onApprove: function(data, actions) {\r\n            // This function captures the funds from the transaction.\r\n            //dispatch({ type: 'NOTIFY', payload: {loading: true} })\r\n\r\n            return actions.order.capture().then(function(details) {\r\n\r\n             postData('order',{address,mobile,cart,total},auth.token).\r\n             then(res=>{ if(res.err) return dispatch({ type: 'NOTIFY', payload: {error: res.err} })})\r\n             dispatch({type:'ADD_CART',payload:[]})\r\n             return dispatch({ type: 'NOTIFY', payload: {succes: res.err} })\r\n            });\r\n          }\r\n      }).render(refPaypalBtn.current);\r\n  },[])\r\n    return(\r\n        <div ref={refPaypalBtn}></div>\r\n    )\r\n    \r\n    }\r\nexport default paypalBtn "],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,UAAU,QAAQ,OAAO;AACrD,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAAQC,WAAW,QAAO,sBAAsB;AAChD,SAAQC,UAAU,QAAO,kBAAkB;AAAA;AAE3C,MAAMC,SAAS,GAAG,CAAC;EAACC,KAAK;EAACC,OAAO;EAACC,MAAM;EAACC,KAAK;EAACC;AAAQ,CAAC,KAAK;EACzD,MAAMC,YAAY,GAAGX,MAAM,EAAE;EAC7B,MAAK;IAACY,IAAI;IAACC;EAAI,CAAC,GAACJ,KAAK;EACtBV,SAAS,CAAC,MAAM;IACde,MAAM,CAACC,OAAO,CAAC;MACXC,WAAW,EAAE,UAASC,IAAI,EAAEC,OAAO,EAAE;QACnC;QACA,OAAOA,OAAO,CAACC,KAAK,CAACC,MAAM,CAAC;UAC1BC,cAAc,EAAE,CAAC;YACfC,MAAM,EAAE;cACNC,KAAK,EAACjB;YACR;UACF,CAAC;QACH,CAAC,CAAC;MACJ,CAAC;MACDkB,SAAS,EAAE,UAASP,IAAI,EAAEC,OAAO,EAAE;QACjC;QACA;;QAEA,OAAOA,OAAO,CAACC,KAAK,CAACM,OAAO,EAAE,CAACC,IAAI,CAAC,UAASC,OAAO,EAAE;UAErDzB,QAAQ,CAAC,OAAO,EAAC;YAACK,OAAO;YAACC,MAAM;YAACI,IAAI;YAACN;UAAK,CAAC,EAACO,IAAI,CAACe,KAAK,CAAC,CACxDF,IAAI,CAACG,GAAG,IAAE;YAAE,IAAGA,GAAG,CAACC,GAAG,EAAE,OAAOpB,QAAQ,CAAC;cAAEqB,IAAI,EAAE,QAAQ;cAAEC,OAAO,EAAE;gBAACC,KAAK,EAAEJ,GAAG,CAACC;cAAG;YAAE,CAAC,CAAC;UAAA,CAAC,CAAC;UACxFpB,QAAQ,CAAC;YAACqB,IAAI,EAAC,UAAU;YAACC,OAAO,EAAC;UAAE,CAAC,CAAC;UACtC,OAAOtB,QAAQ,CAAC;YAAEqB,IAAI,EAAE,QAAQ;YAAEC,OAAO,EAAE;cAACE,MAAM,EAAEL,GAAG,CAACC;YAAG;UAAE,CAAC,CAAC;QAChE,CAAC,CAAC;MACJ;IACJ,CAAC,CAAC,CAACK,MAAM,CAACxB,YAAY,CAACyB,OAAO,CAAC;EACnC,CAAC,EAAC,EAAE,CAAC;EACH,oBACI;IAAK,GAAG,EAAEzB;EAAa;IAAA;IAAA;IAAA;EAAA,QAAO;AAGlC,CAAC;AACL,eAAeN,SAAS"},"metadata":{},"sourceType":"module"}