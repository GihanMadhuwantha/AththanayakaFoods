{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\gihanmadhuwantha\\\\Desktop\\\\system_Development\\\\AththanayakaFoods\\\\aththanayakafoods\\\\pages\\\\edit_user\\\\[id].js\",\n  _this = this,\n  _s = $RefreshSig$();\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport Head from 'next/head';\nimport { useContext, useState, useEffect } from 'react';\nimport { DataContext } from '../../store/GlobalState';\nimport { updateItem } from '../../store/Actions';\nimport { useRouter } from 'next/router';\nimport { patchData } from '../../utils/fetchData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar EditUser = function EditUser() {\n  _s();\n  var router = useRouter();\n  var id = router.query.id;\n  var _useContext = useContext(DataContext),\n    state = _useContext.state,\n    dispatch = _useContext.dispatch;\n  var auth = state.auth,\n    users = state.users;\n  var _useState = useState([]),\n    editUser = _useState[0],\n    setEditUser = _useState[1];\n  var _useState2 = useState(false),\n    checkAdmin = _useState2[0],\n    setCheckAdmin = _useState2[1];\n  var _useState3 = useState(0),\n    num = _useState3[0],\n    setNum = _useState3[1];\n  useEffect(function () {\n    users.forEach(function (user) {\n      if (user._id === id) {\n        setEditUser(user);\n        setCheckAdmin(user.role === 'admin' ? true : false);\n      }\n    });\n  }, [users]);\n  var handleCheck = function handleCheck() {\n    setCheckAdmin(!checkAdmin);\n    setNum(num + 1);\n  };\n  var handleSubmit = function handleSubmit() {\n    var role = checkAdmin ? 'admin' : 'user';\n    if (num % 2 !== 0) {\n      dispatch({\n        type: 'NOTIFY',\n        payload: {\n          loading: true\n        }\n      });\n      patchData(\"user/\".concat(editUser._id), {\n        role: role\n      }, auth.token).then(function (res) {\n        if (res.err) return dispatch({\n          type: 'NOTIFY',\n          payload: {\n            error: res.err\n          }\n        });\n        dispatch(updateItem(users, editUser._id, _objectSpread(_objectSpread({}, editUser), {}, {\n          role: role\n        }), 'ADD_USERS'));\n        return dispatch({\n          type: 'NOTIFY',\n          payload: {\n            success: res.msg\n          }\n        });\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit_user my-3\",\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Edit User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-dark\",\n        onClick: function onClick() {\n          return router.back();\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-long-arrow-alt-left\",\n          \"aria-hidden\": true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, _this), \" Go Back\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-4 mx-auto my-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-uppercase text-secondary\",\n        children: \"Edit User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          className: \"d-block\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          size: \"50\",\n          defaultValue: editUser.name,\n          disabled: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          className: \"d-block\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          size: \"50\",\n          defaultValue: editUser.name,\n          disabled: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"isAdmin\",\n          checked: checkAdmin,\n          style: {\n            width: '20px',\n            height: '20px'\n          },\n          onChange: handleCheck\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"isAdmin\",\n          style: {\n            transform: 'translate(4px, -3px)'\n          },\n          children: \"isAdmin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-dark\",\n        onClick: handleSubmit,\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, _this);\n};\n_s(EditUser, \"QlOOGuDrR0+5aBz7ICjpzbTmG2c=\", false, function () {\n  return [useRouter];\n});\n_c = EditUser;\nexport default EditUser;\nvar _c;\n$RefreshReg$(_c, \"EditUser\");","map":{"version":3,"names":["Head","useContext","useState","useEffect","DataContext","updateItem","useRouter","patchData","EditUser","router","id","query","state","dispatch","auth","users","editUser","setEditUser","checkAdmin","setCheckAdmin","num","setNum","forEach","user","_id","role","handleCheck","handleSubmit","type","payload","loading","token","then","res","err","error","success","msg","back","name","width","height","transform"],"sources":["C:/Users/gihanmadhuwantha/Desktop/system_Development/AththanayakaFoods/aththanayakafoods/pages/edit_user/[id].js"],"sourcesContent":["import Head from 'next/head'\r\nimport { useContext, useState, useEffect } from 'react'\r\nimport {DataContext} from '../../store/GlobalState'\r\nimport {updateItem} from '../../store/Actions'\r\n\r\nimport {useRouter} from 'next/router'\r\nimport {patchData} from '../../utils/fetchData'\r\n\r\nconst EditUser = () => {\r\n    const router = useRouter()\r\n    const { id }= router.query\r\n\r\n    const {state, dispatch} = useContext(DataContext)\r\n    const {auth, users} = state\r\n\r\n    const [editUser, setEditUser] = useState([])\r\n    const [checkAdmin, setCheckAdmin] = useState(false)\r\n    const [num, setNum] = useState(0)\r\n\r\n    useEffect(() => {\r\n        users.forEach(user => {\r\n            if(user._id === id){\r\n                setEditUser(user)\r\n                setCheckAdmin(user.role === 'admin' ? true : false)\r\n            }\r\n        })\r\n    },[users])\r\n\r\n    const handleCheck = () => {\r\n        setCheckAdmin(!checkAdmin)\r\n        setNum(num + 1)\r\n    }\r\n\r\n    const handleSubmit = () => {\r\n        let role = checkAdmin ? 'admin' : 'user'\r\n        if(num % 2 !== 0){\r\n            dispatch({type: 'NOTIFY', payload: {loading: true}})\r\n            patchData(`user/${editUser._id}`, {role}, auth.token)\r\n            .then(res => {\r\n                if(res.err) return dispatch({type: 'NOTIFY', payload: {error: res.err}})\r\n\r\n                dispatch(updateItem(users, editUser._id, {\r\n                    ...editUser, role\r\n                }, 'ADD_USERS'))\r\n\r\n                return dispatch({type: 'NOTIFY', payload: {success: res.msg}})\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n    \r\n    return (\r\n        <div className=\"edit_user my-3\">\r\n            <Head>\r\n                <title>Edit User</title>\r\n            </Head>\r\n\r\n            <div>\r\n                <button className=\"btn btn-dark\" onClick={() => router.back()}>\r\n                    <i className=\"fas fa-long-arrow-alt-left\" aria-hidden></i> Go Back\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"col-md-4 mx-auto my-4\">\r\n                <h2 className=\"text-uppercase text-secondary\">Edit User</h2>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"name\" className=\"d-block\">Name</label>\r\n                    <input type=\"text\" id=\"name\" size=\"50\" defaultValue={editUser.name} disabled />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"email\" className=\"d-block\">Email</label>\r\n                    <input type=\"text\" id=\"name\" size=\"50\" defaultValue={editUser.name} disabled />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <input type=\"checkbox\" id=\"isAdmin\" checked={checkAdmin}\r\n                    style={{width: '20px', height: '20px'}} onChange={handleCheck} />\r\n\r\n                    <label htmlFor=\"isAdmin\" style={{transform: 'translate(4px, -3px)'}}>\r\n                        isAdmin\r\n                    </label>\r\n                </div>\r\n\r\n                <button className=\"btn btn-dark\" onClick={handleSubmit}>Update</button>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditUser"],"mappings":"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"},"metadata":{},"sourceType":"module"}